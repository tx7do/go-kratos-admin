// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/go-kratos/kratos/v2"
	"github.com/tx7do/kratos-bootstrap/bootstrap"
	"go-wind-admin/app/admin/service/internal/data"
	"go-wind-admin/app/admin/service/internal/server"
	"go-wind-admin/app/admin/service/internal/service"
)

// Injectors from wire.go:

// initApp 初始化 kratos 应用的 Wire provider 入口。
// initApp initializes the Wire provider entry for the kratos application.
//
// 参数 / Parameters:
//   - *bootstrap.Context: 引导上下文 / *bootstrap.Context: bootstrap context
//
// 返回 / Returns:
//   - *kratos.App: 已构建的应用实例 / *kratos.App: constructed application instance
//   - func(): 应用关闭时的清理函数 / func(): cleanup function to run on shutdown
//   - error: 构建过程中可能发生的错误 / error: possible construction error
func initApp(context *bootstrap.Context) (*kratos.App, func(), error) {
	authenticator := data.NewAuthenticator(context)
	entClient, cleanup, err := data.NewEntClient(context)
	if err != nil {
		return nil, nil, err
	}
	roleRepo := data.NewRoleRepo(context, entClient)
	apiResourceRepo := data.NewApiResourceRepo(context, entClient)
	authorizer := data.NewAuthorizer(context, roleRepo, apiResourceRepo)
	adminOperationLogRepo := data.NewAdminOperationLogRepo(context, entClient)
	adminLoginLogRepo := data.NewAdminLoginLogRepo(context, entClient)
	userRepo := data.NewUserRepo(context, entClient)
	crypto := data.NewPasswordCrypto()
	userCredentialRepo := data.NewUserCredentialRepo(context, entClient, crypto)
	tenantRepo := data.NewTenantRepo(context, entClient)
	client, cleanup2, err := data.NewRedisClient(context)
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	userTokenCacheRepo := data.NewUserTokenRepo(context, client, authenticator)
	authenticationService := service.NewAuthenticationService(context, userRepo, userCredentialRepo, tenantRepo, roleRepo, userTokenCacheRepo, authenticator)
	positionRepo := data.NewPositionRepo(context, entClient)
	departmentRepo := data.NewDepartmentRepo(context, entClient)
	organizationRepo := data.NewOrganizationRepo(context, entClient)
	userRoleRepo := data.NewUserRoleRepo(context, entClient)
	userPositionRepo := data.NewUserPositionRepo(context, entClient)
	userService := service.NewUserService(context, userRepo, roleRepo, userCredentialRepo, positionRepo, departmentRepo, organizationRepo, tenantRepo, userRoleRepo, userPositionRepo)
	menuRepo := data.NewMenuRepo(context, entClient)
	menuService := service.NewMenuService(context, menuRepo)
	routerService := service.NewRouterService(context, menuRepo, roleRepo, userRepo)
	organizationService := service.NewOrganizationService(context, organizationRepo, userRepo)
	roleApiRepo := data.NewRoleApiRepo(context, entClient)
	roleMenuRepo := data.NewRoleMenuRepo(context, entClient)
	roleOrgRepo := data.NewRoleOrgRepo(context, entClient)
	roleDeptRepo := data.NewRoleDeptRepo(context, entClient)
	rolePositionRepo := data.NewRolePositionRepo(context, entClient)
	roleService := service.NewRoleService(context, authorizer, roleRepo, roleApiRepo, roleMenuRepo, roleOrgRepo, roleDeptRepo, rolePositionRepo)
	positionService := service.NewPositionService(context, positionRepo, departmentRepo, organizationRepo)
	dictTypeRepo := data.NewDictTypeRepo(context, entClient)
	dictEntryRepo := data.NewDictEntryRepo(context, entClient)
	dictService := service.NewDictService(context, dictTypeRepo, dictEntryRepo)
	departmentService := service.NewDepartmentService(context, departmentRepo, organizationRepo, userRepo)
	adminLoginLogService := service.NewAdminLoginLogService(context, adminLoginLogRepo)
	adminOperationLogService := service.NewAdminOperationLogService(context, adminOperationLogRepo, apiResourceRepo)
	minIOClient := data.NewMinIoClient(context)
	ossService := service.NewOssService(context, minIOClient)
	uEditorService := service.NewUEditorService(context, minIOClient)
	fileRepo := data.NewFileRepo(context, entClient)
	fileService := service.NewFileService(context, fileRepo)
	tenantService := service.NewTenantService(context, tenantRepo, userRepo, userCredentialRepo)
	taskRepo := data.NewTaskRepo(context, entClient)
	taskService := service.NewTaskService(context, taskRepo, userRepo)
	internalMessageRepo := data.NewInternalMessageRepo(context, entClient)
	internalMessageCategoryRepo := data.NewInternalMessageCategoryRepo(context, entClient)
	internalMessageRecipientRepo := data.NewInternalMessageRecipientRepo(context, entClient)
	sseServer := server.NewSseServer(context)
	internalMessageService := service.NewInternalMessageService(context, internalMessageRepo, internalMessageCategoryRepo, internalMessageRecipientRepo, userRepo, sseServer, userTokenCacheRepo)
	internalMessageCategoryService := service.NewInternalMessageCategoryService(context, internalMessageCategoryRepo)
	internalMessageRecipientService := service.NewInternalMessageRecipientService(context, internalMessageRepo, internalMessageRecipientRepo)
	adminLoginRestrictionRepo := data.NewAdminLoginRestrictionRepo(context, entClient)
	adminLoginRestrictionService := service.NewAdminLoginRestrictionService(context, adminLoginRestrictionRepo)
	userProfileService := service.NewUserProfileService(context, userRepo, userTokenCacheRepo, roleRepo, userCredentialRepo)
	apiResourceService := service.NewApiResourceService(context, apiResourceRepo, authorizer)
	httpServer, err := server.NewRestServer(context, authenticator, authorizer, adminOperationLogRepo, adminLoginLogRepo, authenticationService, userService, menuService, routerService, organizationService, roleService, positionService, dictService, departmentService, adminLoginLogService, adminOperationLogService, ossService, uEditorService, fileService, tenantService, taskService, internalMessageService, internalMessageCategoryService, internalMessageRecipientService, adminLoginRestrictionService, userProfileService, apiResourceService)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	asynqServer, err := server.NewAsynqServer(context, taskService)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	app := newApp(context, httpServer, asynqServer, sseServer)
	return app, func() {
		cleanup2()
		cleanup()
	}, nil
}
